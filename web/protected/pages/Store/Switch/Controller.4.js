var PageJs=new Class.create;
PageJs.prototype=Object.extend(new BPCPageJs,{load:function(){this.getStoreList($(this._preData.containerId),this._preData.stores);return this},getStoreList:function(f,g){var b,h,k,l,e,c,d;b=this;h=f||null;k=g||[];if(!h)return b;h.insert({bottom:l=(new Element("div")).addClassName("list-group")});k.each(function(a){l.insert({bottom:(new Element("a",{href:"javascript:void(0)","class":"list-group-item",store_id:a.id,role_id:a.role.id,title:"Switch to this store"})).addClassName(a.selected&&!0===a.selected?
"active":"").update((new Element("div",{"class":"row"})).insert({bottom:(new Element("div",{"class":"col-sm-8"})).update(a.name)}).insert({bottom:(new Element("div",{"class":"col-sm-4 text-right"})).update(a.role.name)})).observe("click",function(a){e=$(this);if(e.hasClassName("active"))return b;c=e.readAttribute("store_id");d=e.readAttribute("role_id");if(!c||""===c||0==c||!d||""===d||0==d)return b;b.switchStore(c,d)})})})},switchStore:function(f,g){this._disableAll();this.postAjax(this.getCallbackId("switchStore"),
{storeId:f,roleId:g},{onComplete:function(){window.parent&&window.parent.location.reload(!0);location.reload(!0)}});return this}});